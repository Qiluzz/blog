(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{384:function(s,t,a){"use strict";a.r(t);var e=a(43),c=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"版本库提交信息规范与自动验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本库提交信息规范与自动验证"}},[s._v("#")]),s._v(" 版本库提交信息规范与自动验证")]),s._v(" "),a("h2",{attrs:{id:"版本库提交信息规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本库提交信息规范"}},[s._v("#")]),s._v(" 版本库提交信息规范")]),s._v(" "),a("p",[s._v("本文规范借鉴社区使用最广的 "),a("code",[s._v("Angular")]),s._v(" 规范，稍加修改。")]),s._v(" "),a("p",[s._v("一般提交命令我们使用如 "),a("code",[s._v('git commit- m "feat(user): add user login"')])]),s._v(" "),a("p",[s._v("其中当前 "),a("code",[s._v("commit message")]),s._v(" 信息包括三部分："),a("code",[s._v("type")]),s._v("（必需）、"),a("code",[s._v("scope")]),s._v("（可选）、 "),a("code",[s._v("subject")]),s._v("（必需）")]),s._v(" "),a("h3",{attrs:{id:"type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[s._v("#")]),s._v(" type")]),s._v(" "),a("p",[a("code",[s._v("type")]),s._v(" 用于说明 "),a("code",[s._v("commit")]),s._v(" 的类别，允许使用下面 "),a("code",[s._v("8")]),s._v(" 个标识。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("feat: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新功能（feature）")]),s._v("\n\nfix: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修补 bug")]),s._v("\n\ndocs: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文档（documentation）")]),s._v("\n\nstyle: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式（不影响代码执行的变动，非css样式专用）")]),s._v("\n\nrefactor: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重构（既不是新增功能，也不是修改 bug 的代码变动）")]),s._v("\n\ntest: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加测试")]),s._v("\n\nchore: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建过程或辅助工具的变动")]),s._v("\n\nrevert: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对之前修改代码 commit 记录的还原")]),s._v("\n")])])]),a("h3",{attrs:{id:"scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope"}},[s._v("#")]),s._v(" scope")]),s._v(" "),a("p",[a("code",[s._v("scope")]),s._v(" 用于说明 "),a("code",[s._v("commit")]),s._v(" 的影响范围，比如数据层、控制层、视图层、功能模块等，视项目的不同而不同。")]),s._v(" "),a("p",[s._v("例如：")]),s._v(" "),a("ul",[a("li",[s._v("新增用户管理的新增用户功能")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"feat(user): add addUser"')]),s._v("\n")])])]),a("ul",[a("li",[s._v("修复了用户管理的新增用户功能的"),a("code",[s._v("bug")])])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fix(user): addUser"')]),s._v("\n")])])]),a("ul",[a("li",[s._v("更新文档说明")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docs(readme): update readme"')]),s._v("\n")])])]),a("ul",[a("li",[s._v("调整新增用户代码格式（代码换行或者删除换行）")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style(user/add): wrap line"')]),s._v("\n")])])]),a("ul",[a("li",[s._v("增加单元测试代码")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test: add test"')]),s._v("\n")])])]),a("ul",[a("li",[s._v("配置或者修改自动化部署文件或者构建工具")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"chore: cicd"')]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"chore: add vue-router"')]),s._v("\n")])])]),a("p",[s._v("还有一种是相对来说比较特殊的对之前 "),a("code",[s._v("commit")]),s._v(" 代码的回退，比如还原之前修改 "),a("code",[s._v("bug")]),s._v(" 的错误提交")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"revert: fix(user): addUser"')]),s._v("\n")])])]),a("h3",{attrs:{id:"subject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subject"}},[s._v("#")]),s._v(" subject")]),s._v(" "),a("p",[a("code",[s._v("subject")]),s._v(" 是 "),a("code",[s._v("commit")]),s._v(" 目的的简短描述，不超过 "),a("code",[s._v("50")]),s._v(" 个字符")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"feat(course): 完成课程管理模块"')]),s._v("\n")])])]),a("h2",{attrs:{id:"自动验证提交信息规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动验证提交信息规范"}},[s._v("#")]),s._v(" 自动验证提交信息规范")]),s._v(" "),a("p",[s._v("为了达到提交信息规范的校验效果，我们使用配置本地 "),a("code",[s._v("git hooks")]),s._v(" 模板的方法，只需设置一次，之后从"),a("code",[s._v("github")]),s._v(" 上 "),a("code",[s._v("clone")]),s._v(" 下来的代码都会沿用当前 "),a("code",[s._v("hooks")]),s._v(" 配置。")]),s._v(" "),a("p",[s._v("下面命令操作环境为 "),a("code",[s._v("git bash")]),s._v("：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("github")]),s._v(" 克隆仓库到本地")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/jwchan1996/commit-msg.git\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /commit-msg\n")])])]),a("ul",[a("li",[s._v("创建 "),a("code",[s._v("git")]),s._v(" 钩子模板文件夹")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p ~/.git_template/hooks \n")])])]),a("ul",[a("li",[s._v("复制当前配置好的 "),a("code",[s._v("commit-msg")]),s._v(" "),a("code",[s._v("hooks")]),s._v(" 文件到模板")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" commit-msg ~/.git_template/hooks\n")])])]),a("ul",[a("li",[s._v("设置 "),a("code",[s._v("git")]),s._v(" 的初始化模板的使用模板")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global init.templatedir ~/.git_template \n")])])]),a("p",[s._v("具体 "),a("code",[s._v("commit-msg")]),s._v(" 文件可以点击"),a("a",{attrs:{href:"https://github.com/jwchan1996/commit-msg.git",target:"_blank",rel:"noopener noreferrer"}},[s._v("查看详情"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=c.exports}}]);